{"ast":null,"code":"/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n// Use the AEM Headless SDK to make the GraphQL requests\nconst {\n  AEMHeadless\n} = require('@adobe/aem-headless-client-js'); // environment variable for configuring the headless client\n\n\nconst {\n  REACT_APP_HOST_URI,\n  REACT_APP_GRAPHQL_ENDPOINT,\n  REACT_APP_USE_PROXY,\n  REACT_APP_AUTH_METHOD,\n  REACT_APP_DEV_TOKEN,\n  REACT_APP_BASIC_AUTH_USER,\n  REACT_APP_BASIC_AUTH_PASS\n} = process.env; // In a production application the serviceURL should be set to the production AEM Publish environment\n// In development the serviceURL can be set to '/' which will be a relative proxy is used (see ../authMethods.js) to avoid CORS issues\n\nconst serviceURL = REACT_APP_USE_PROXY === 'true' ? '/' : REACT_APP_HOST_URI; // Get authorization based on environment variables\n// authorization is not needed when connecting to Publish environments\n\nconst setAuthorization = function () {\n  if (REACT_APP_AUTH_METHOD === 'basic') {\n    return [REACT_APP_BASIC_AUTH_USER, REACT_APP_BASIC_AUTH_PASS];\n  } else if (REACT_APP_AUTH_METHOD === 'dev-token') {\n    return REACT_APP_DEV_TOKEN;\n  } else {\n    // no authentication set\n    return;\n  }\n};\n\nexport const aemHeadlessClient = new AEMHeadless({\n  serviceURL: serviceURL,\n  endpoint: REACT_APP_GRAPHQL_ENDPOINT,\n  auth: setAuthorization()\n});\n/**\n * concatenate error messages into a single string.\n * @param {*} errors\n */\n\nexport const mapErrors = function (errors) {\n  return errors.map(error => error.message).join(\",\");\n};","map":{"version":3,"names":["AEMHeadless","require","REACT_APP_HOST_URI","REACT_APP_GRAPHQL_ENDPOINT","REACT_APP_USE_PROXY","REACT_APP_AUTH_METHOD","REACT_APP_DEV_TOKEN","REACT_APP_BASIC_AUTH_USER","REACT_APP_BASIC_AUTH_PASS","process","env","serviceURL","setAuthorization","aemHeadlessClient","endpoint","auth","mapErrors","errors","map","error","message","join"],"sources":["/Users/dkhetawat/Desktop/react-app-code/mec-rockstar-aem/react-app/src/api/headlessClient.js"],"sourcesContent":["/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n\n// Use the AEM Headless SDK to make the GraphQL requests\nconst { AEMHeadless } = require('@adobe/aem-headless-client-js');\n\n// environment variable for configuring the headless client\nconst {\n    REACT_APP_HOST_URI,\n    REACT_APP_GRAPHQL_ENDPOINT,\n    REACT_APP_USE_PROXY,\n    REACT_APP_AUTH_METHOD,\n    REACT_APP_DEV_TOKEN,\n    REACT_APP_BASIC_AUTH_USER,\n    REACT_APP_BASIC_AUTH_PASS\n} = process.env;\n\n// In a production application the serviceURL should be set to the production AEM Publish environment\n// In development the serviceURL can be set to '/' which will be a relative proxy is used (see ../authMethods.js) to avoid CORS issues\nconst serviceURL = REACT_APP_USE_PROXY === 'true' ? '/' : REACT_APP_HOST_URI;\n\n// Get authorization based on environment variables\n// authorization is not needed when connecting to Publish environments\nconst setAuthorization = function () {\n    if (REACT_APP_AUTH_METHOD === 'basic') {\n        return [REACT_APP_BASIC_AUTH_USER, REACT_APP_BASIC_AUTH_PASS];\n    } else if (REACT_APP_AUTH_METHOD === 'dev-token') {\n        return REACT_APP_DEV_TOKEN;\n    } else {\n        // no authentication set\n        return;\n    }\n}\nexport const aemHeadlessClient = new AEMHeadless({\n    serviceURL: serviceURL,\n    endpoint: REACT_APP_GRAPHQL_ENDPOINT,\n    auth: setAuthorization()\n});\n\n/**\n * concatenate error messages into a single string.\n * @param {*} errors\n */\nexport const mapErrors = function (errors) {\n    return errors.map((error) => error.message).join(\",\");\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,MAAM;EAAEA;AAAF,IAAkBC,OAAO,CAAC,+BAAD,CAA/B,C,CAEA;;;AACA,MAAM;EACFC,kBADE;EAEFC,0BAFE;EAGFC,mBAHE;EAIFC,qBAJE;EAKFC,mBALE;EAMFC,yBANE;EAOFC;AAPE,IAQFC,OAAO,CAACC,GARZ,C,CAUA;AACA;;AACA,MAAMC,UAAU,GAAGP,mBAAmB,KAAK,MAAxB,GAAiC,GAAjC,GAAuCF,kBAA1D,C,CAEA;AACA;;AACA,MAAMU,gBAAgB,GAAG,YAAY;EACjC,IAAIP,qBAAqB,KAAK,OAA9B,EAAuC;IACnC,OAAO,CAACE,yBAAD,EAA4BC,yBAA5B,CAAP;EACH,CAFD,MAEO,IAAIH,qBAAqB,KAAK,WAA9B,EAA2C;IAC9C,OAAOC,mBAAP;EACH,CAFM,MAEA;IACH;IACA;EACH;AACJ,CATD;;AAUA,OAAO,MAAMO,iBAAiB,GAAG,IAAIb,WAAJ,CAAgB;EAC7CW,UAAU,EAAEA,UADiC;EAE7CG,QAAQ,EAAEX,0BAFmC;EAG7CY,IAAI,EAAEH,gBAAgB;AAHuB,CAAhB,CAA1B;AAMP;AACA;AACA;AACA;;AACA,OAAO,MAAMI,SAAS,GAAG,UAAUC,MAAV,EAAkB;EACvC,OAAOA,MAAM,CAACC,GAAP,CAAYC,KAAD,IAAWA,KAAK,CAACC,OAA5B,EAAqCC,IAArC,CAA0C,GAA1C,CAAP;AACH,CAFM"},"metadata":{},"sourceType":"module"}